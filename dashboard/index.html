<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>SYNOID Project Dashboard V1</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1111d4",
                        "accent-purple": "#a855f7",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101022",
                        "glass-border": "rgba(255, 255, 255, 0.1)",
                        "glass-bg": "rgba(255, 255, 255, 0.05)",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .ai-glow {
            box-shadow: 0 0 20px rgba(17, 17, 212, 0.3);
        }

        .presence-ring-online {
            box-shadow: 0 0 0 2px #101022, 0 0 0 4px #0bda68;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 antialiased overflow-x-hidden">
    <div class="flex h-screen w-full overflow-hidden">
        <!-- Sidebar Navigation -->
        <aside
            class="w-20 lg:w-64 flex flex-col border-r border-glass-border bg-background-light dark:bg-[#0a0a1a] transition-all duration-300">
            <div class="p-6 flex items-center gap-3">
                <div class="bg-primary p-2 rounded-lg ai-glow">
                    <span class="material-symbols-outlined text-white">auto_awesome</span>
                </div>
                <div class="hidden lg:block overflow-hidden">
                    <h1 class="text-xl font-black tracking-tight leading-none">SYNOID</h1>
                    <p class="text-[10px] uppercase tracking-widest text-slate-500 dark:text-slate-400 font-bold">AI
                        Co-Pilot</p>
                </div>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl bg-primary/10 text-primary border border-primary/20">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span class="text-sm font-semibold hidden lg:block">Dashboard</span>
                </div>
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">check_circle</span>
                    <span class="text-sm font-medium hidden lg:block">Tasks</span>
                </div>
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">smart_toy</span>
                    <span class="text-sm font-medium hidden lg:block">AI Assistant</span>
                </div>
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">folder_open</span>
                    <span class="text-sm font-medium hidden lg:block">Files</span>
                </div>
                <a href="/watch.html"
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">play_circle</span>
                    <span class="text-sm font-medium hidden lg:block">Video Player</span>
                </a>
                <a href="/viewer.html"
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">photo_library</span>
                    <span class="text-sm font-medium hidden lg:block">Omni Viewer</span>
                </a>
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">insights</span>
                    <span class="text-sm font-medium hidden lg:block">Analytics</span>
                </div>
            </nav>
            <div class="p-4 mt-auto border-t border-glass-border">
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-slate-200 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">settings</span>
                    <span class="text-sm font-medium hidden lg:block">Settings</span>
                </div>
                <div
                    class="flex items-center gap-3 px-3 py-3 rounded-xl hover:bg-red-500/10 text-red-500 transition-colors cursor-pointer">
                    <span class="material-symbols-outlined">logout</span>
                    <span class="text-sm font-medium hidden lg:block">Sign Out</span>
                </div>
            </div>
        </aside>
        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col overflow-y-auto bg-slate-50 dark:bg-background-dark">
            <!-- Header -->
            <header
                class="h-20 flex items-center justify-between px-8 border-b border-glass-border sticky top-0 bg-slate-50/80 dark:bg-background-dark/80 backdrop-blur-xl z-20">
                <div class="flex items-center gap-4">
                    <h2 class="text-xl font-bold tracking-tight">Project Overview</h2>
                    <div class="h-4 w-px bg-glass-border mx-2"></div>
                    <div class="flex -space-x-2" id="team-presence">
                        <!-- Team presence will be loaded here -->
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="relative hidden md:block">
                        <span
                            class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">search</span>
                        <input
                            class="w-64 pl-10 pr-4 py-2 rounded-lg bg-slate-200/50 dark:bg-white/5 border border-glass-border text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"
                            placeholder="Search project, tasks, files..." type="text" />
                    </div>
                    <button
                        class="size-10 flex items-center justify-center rounded-lg bg-slate-200/50 dark:bg-white/5 border border-glass-border hover:bg-primary/10 hover:text-primary transition-all">
                        <span class="material-symbols-outlined">notifications</span>
                    </button>
                    <div class="size-10 rounded-lg bg-cover bg-center border border-glass-border profile-pic"
                        data-alt="Current user profile picture"></div>
                </div>
            </header>
            <div class="p-8 space-y-8 max-w-7xl mx-auto w-full">
                <!-- Welcome Section -->
                <section class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                    <div>
                        <h3 class="text-3xl font-black tracking-tight text-slate-900 dark:text-white mb-2"
                            id="welcome-message">Welcome back, Sarah.</h3>
                        <p class="text-slate-500 dark:text-slate-400">SYNOID has identified <span
                                class="text-primary font-bold" id="critical-items-count">3 critical action items</span>
                            for today's sprint.</p>
                    </div>
                    <div class="flex gap-3">
                        <button
                            class="px-5 py-2.5 rounded-xl bg-primary text-white font-bold text-sm ai-glow hover:opacity-90 transition-all flex items-center gap-2">
                            <span class="material-symbols-outlined text-sm">add</span> New Task
                        </button>
                    </div>
                </section>
                <!-- Stats Grid -->
                <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div
                        class="glass-card p-6 rounded-2xl relative overflow-hidden group hover:border-primary/50 transition-all">
                        <div class="flex justify-between items-start mb-4">
                            <p class="text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                                Active Tasks</p>
                            <span class="material-symbols-outlined text-primary">analytics</span>
                        </div>
                        <div class="flex items-end gap-3">
                            <h4 class="text-4xl font-black" id="tasks-stat">24/40</h4>
                            <span class="text-green-500 font-bold text-sm mb-1.5" id="tasks-change">+60%</span>
                        </div>
                        <div class="mt-4 w-full bg-slate-200 dark:bg-white/10 h-1.5 rounded-full overflow-hidden">
                            <div class="bg-primary h-full rounded-full" id="tasks-progress" style="width: 60%"></div>
                        </div>
                        <div class="absolute -right-4 -bottom-4 opacity-5 group-hover:opacity-10 transition-opacity">
                            <span class="material-symbols-outlined text-8xl">checklist</span>
                        </div>
                    </div>
                    <div
                        class="glass-card p-6 rounded-2xl relative overflow-hidden group hover:border-accent-purple/50 transition-all">
                        <div class="flex justify-between items-start mb-4">
                            <p class="text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">
                                Productivity</p>
                            <span class="material-symbols-outlined text-accent-purple">trending_up</span>
                        </div>
                        <div class="flex items-end gap-3">
                            <h4 class="text-4xl font-black" id="productivity-stat">+12%</h4>
                            <span class="text-accent-purple font-bold text-sm mb-1.5">Weekly</span>
                        </div>
                        <div class="mt-4 flex gap-1 items-end h-8" id="productivity-bars">
                            <!-- Bars dynamically added -->
                        </div>
                    </div>
                    <div class="glass-card p-6 rounded-2xl border-primary/20 bg-primary/5">
                        <div class="flex justify-between items-start mb-4">
                            <p class="text-sm font-bold text-primary uppercase tracking-wider">AI Insights</p>
                            <div class="flex h-6 w-6 items-center justify-center rounded-full bg-primary/20">
                                <span class="material-symbols-outlined text-[14px] text-primary">bolt</span>
                            </div>
                        </div>
                        <div class="space-y-3" id="ai-insights">
                            <!-- Insights dynamically added -->
                        </div>
                    </div>
                </section>
                <!-- Main Grid -->
                <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                    <!-- Left: AI Co-pilot & Task Board -->
                    <div class="xl:col-span-2 space-y-8">
                        <!-- AI Co-pilot Input -->
                        <div class="glass-card p-1.5 rounded-2xl ai-glow border-primary/30">
                            <div class="bg-background-light dark:bg-[#15152a] rounded-xl p-4 flex flex-col gap-4">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="size-10 rounded-full bg-primary flex items-center justify-center shrink-0">
                                        <span class="material-symbols-outlined text-white">smart_toy</span>
                                    </div>
                                    <textarea id="ai-input"
                                        class="w-full bg-transparent border-none focus:ring-0 text-lg resize-none placeholder:text-slate-600 placeholder:font-light"
                                        placeholder="Ask SYNOID to summarize today's standup or analyze project risks..."
                                        rows="2"></textarea>
                                </div>
                                <div id="ai-response"
                                    class="hidden text-sm text-slate-300 bg-black/30 p-3 rounded-lg border border-glass-border">
                                </div>
                                <div class="flex items-center justify-between pt-2 border-t border-glass-border">
                                    <div class="flex items-center gap-1">
                                        <button class="p-2 text-slate-500 hover:text-primary transition-colors">
                                            <span class="material-symbols-outlined">mic</span>
                                        </button>
                                        <button class="p-2 text-slate-500 hover:text-primary transition-colors">
                                            <span class="material-symbols-outlined">attach_file</span>
                                        </button>
                                        <button class="p-2 text-slate-500 hover:text-primary transition-colors">
                                            <span class="material-symbols-outlined">image</span>
                                        </button>
                                    </div>
                                    <button id="ask-ai-btn"
                                        class="px-6 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:scale-[1.02] active:scale-95 transition-all">
                                        Ask AI Co-pilot
                                    </button>
                                </div>
                            </div>
                        </div>
                        <!-- Active Projects/Tasks -->
                        <div class="glass-card rounded-2xl overflow-hidden">
                            <div class="px-6 py-4 border-b border-glass-border flex justify-between items-center">
                                <h5 class="font-bold">Focus Tasks</h5>
                                <button
                                    class="text-xs text-slate-500 hover:text-white uppercase tracking-widest font-bold">View
                                    Board</button>
                            </div>
                            <div class="divide-y divide-glass-border" id="focus-tasks">
                                <!-- Tasks dynamically added -->
                            </div>
                        </div>
                    </div>
                    <!-- Right: Activity Feed & Presence -->
                    <div class="space-y-8">
                        <!-- Presence Bar Card -->
                        <div class="glass-card p-6 rounded-2xl">
                            <h5 class="font-bold mb-6 flex items-center gap-2">
                                <span class="material-symbols-outlined text-sm text-green-500 fill-1">circle</span>
                                Team Activity
                            </h5>
                            <div class="space-y-4" id="team-activity-list">
                                <!-- Activity list dynamically added -->
                            </div>
                        </div>
                        <!-- Recent Activity -->
                        <div class="glass-card rounded-2xl overflow-hidden">
                            <div class="px-6 py-4 border-b border-glass-border">
                                <h5 class="font-bold">Recent Activity</h5>
                            </div>
                            <div class="p-6 space-y-6" id="recent-activity-list">
                                <!-- Recent activity dynamically added -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // SYNOID Project Dashboard API Connection
        const API_BASE = '/api';

        function getApiKey() {
            return localStorage.getItem('synoid_api_key');
        }

        function setApiKey(key) {
            localStorage.setItem('synoid_api_key', key);
        }

        async function fetchData(endpoint, options = {}) {
            const apiKey = getApiKey();
            if (apiKey) {
                options.headers = {
                    ...options.headers,
                    'Authorization': `Bearer ${apiKey}`
                };
            }

            try {
                const response = await fetch(`${API_BASE}${endpoint}`, options);
                if (response.status === 401) {
                    const newKey = prompt('SYNOID API Key required:');
                    if (newKey) {
                        setApiKey(newKey);
                        return fetchData(endpoint, options);
                    }
                }
                return await response.json();
            } catch (e) {
                console.error(`Failed to fetch ${endpoint}:`, e);
                return null;
            }
        }

        async function updateStatus() {
            const data = await fetchData('/status');
            if (!data) return;

            document.getElementById('tasks-stat').textContent = `${data.tasks.active}/${data.tasks.total}`;
            document.getElementById('tasks-progress').style.width = `${(data.tasks.active / data.tasks.total) * 100}%`;
            document.getElementById('productivity-stat').textContent = `${data.productivity}%`;
        }

        async function updateTasks() {
            const tasks = await fetchData('/tasks');
            if (!tasks) return;

            const container = document.getElementById('focus-tasks');
            container.innerHTML = tasks.map(task => `
            <div class="p-6 flex items-center gap-4 hover:bg-white/5 transition-colors group">
                <div class="size-5 rounded border-2 ${task.completed ? 'border-primary bg-primary' : 'border-slate-600 group-hover:border-primary'} transition-colors cursor-pointer flex items-center justify-center">
                    ${task.completed ? '<span class="material-symbols-outlined text-[16px] font-bold">check</span>' : ''}
                </div>
                <div class="flex-1">
                    <h6 class="font-semibold text-sm ${task.completed ? 'line-through text-slate-500' : ''}">${task.title}</h6>
                    <p class="text-xs text-slate-500">${task.category} â€¢ ${task.due}</p>
                </div>
                <div class="flex items-center gap-3">
                    <div class="px-2 py-1 rounded-md bg-${task.priority === 'High' ? 'red-500/10 text-red-500' : 'primary/10 text-primary'} text-[10px] font-bold uppercase tracking-tighter">${task.priority}</div>
                </div>
            </div>
        `).join('');
        }

        document.getElementById('ask-ai-btn').addEventListener('click', async () => {
            const input = document.getElementById('ai-input');
            const responseBox = document.getElementById('ai-response');
            const text = input.value.trim();
            if (!text) return;

            input.disabled = true;
            responseBox.classList.remove('hidden');
            responseBox.textContent = 'SYNOID is thinking...';

            try {
                const data = await fetchData('/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: text })
                });
                if (data) {
                    responseBox.textContent = data.response;
                }
            } catch (e) {
                responseBox.textContent = 'Connection Error.';
            } finally {
                input.disabled = false;
            }
        });

        // Initial load
        updateStatus();
        updateTasks();
        setInterval(updateStatus, 5000);
    </script>
</body>

</html>